<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>「伊藤順子」のリスト</title>
  <style>
    /* Styles remain unchanged for brevity */
  </style>
</head>

<body>

  <h1>「伊藤順子」のリスト</h1>
  <!-- Back button to return to the login page -->
  <a href="index.html">戻る</a>
  <div id="addTaskForm">
    <input type="text" id="newTaskTitle" placeholder="名前">
    <div class="input-group">
      <label for="newTaskDeadline">日付</label>
      <input type="date" id="newTaskDeadline">
    </div>
    <textarea id="newTaskComment" placeholder="コメント"></textarea>
    <button id="addTaskButton">追加</button>
  </div>

  <p>人数: <span id="totalTasks">0</span></p>

  <button id="sortButton">並び替え</button>

  <ul id="taskList"></ul>

  <div id="displayArea"></div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const taskList = document.getElementById('taskList');
      const totalTasksElement = document.getElementById('totalTasks');
      const addTaskButton = document.getElementById('addTaskButton');
      const sortButton = document.getElementById('sortButton');
      const displayArea = document.getElementById('displayArea');

      let ascendingOrder = true;

      function createTaskElement(title, deadline, comment) {
        const listItem = document.createElement('li');
        listItem.className = 'task';

        const taskTitle = document.createElement('div');
        taskTitle.className = 'title';
        taskTitle.innerText = title;

        const deadlineContainer = document.createElement('div');
        deadlineContainer.className = 'input-group';
        const dateLabel = document.createElement('label');
        dateLabel.innerText = '日付';
        const deadlineInput = document.createElement('input');
        deadlineInput.type = 'date';
        deadlineInput.value = deadline;
        deadlineContainer.appendChild(dateLabel);
        deadlineContainer.appendChild(deadlineInput);

        const commentTextarea = document.createElement('textarea');
        commentTextarea.value = comment;
        commentTextarea.placeholder = 'コメント';
        commentTextarea.className = 'comment';

        const deleteButton = document.createElement('button');
        deleteButton.innerText = '削除';
        deleteButton.addEventListener('click', () => deleteTask(listItem, title));

        listItem.appendChild(taskTitle);
        listItem.appendChild(deadlineContainer);
        listItem.appendChild(commentTextarea);
        listItem.appendChild(deleteButton);

        taskTitle.addEventListener('click', () => {
          const comment = listItem.querySelector('.comment');
          comment.style.display = comment.style.display === 'none' ? 'block' : 'none';
        });

        return listItem;
      }

      function addTask() {
        const newTaskTitle = document.getElementById('newTaskTitle').value;
        const newTaskDeadline = document.getElementById('newTaskDeadline').value;
        const newTaskComment = document.getElementById('newTaskComment').value;

        if (newTaskTitle.trim() === '') {
          alert('名前を入れてください。');
          return;
        }

        const taskElement = createTaskElement(newTaskTitle, newTaskDeadline, newTaskComment);
        taskList.insertBefore(taskElement, taskList.firstChild);

        saveTasksToStorage();
        document.getElementById('newTaskTitle').value = '';
        document.getElementById('newTaskDeadline').value = '';
        document.getElementById('newTaskComment').value = '';

        updateTotalTasks();
      }

      function deleteTask(listItem, title) {
        listItem.remove();
        removeFromStorage(title);
        updateTotalTasks();
      }

      function updateTotalTasks() {
        totalTasksElement.innerText = taskList.children.length;
      }

      function sortTasksByDeadline() {
        const tasks = Array.from(taskList.children);
        tasks.sort((a, b) => {
          const dateA = new Date(a.querySelector('input
